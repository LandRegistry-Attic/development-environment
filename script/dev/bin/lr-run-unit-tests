#!/bin/bash

#Uncomment this line if you want to debug this script
#set -x
set -e

source /vagrant/script/dev/virtualenv-functions

if [[ -d tests ]] ; then
    create_virtual_env
    install_requirements
    
    if [[ -z ${SETTINGS} ]] ; then
    	echo "Configuring SETTINGS to be config.TestConfig"
    	echo "Please ensure you have a config.TestConfig in your project"
    	export SETTINGS="config.TestConfig"
    fi

    py.test
else
    echo "No unit tests found in directory ${app_name}"
    echo 
    echo "You need to run this in a directory containing an application (normally /vagrant/apps/<app-name>)"
    echo "or specify an app name: run-unit-tests <app-name>"
fi
